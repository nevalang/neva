import {
    fmt
    errors
    runtime
}

type MaybeInt union {
    Int int
    None
}

def Main(start any) (stop any) {
    box Union<MaybeInt>
    unbox Unbox
	---
	:start -> [
        42 -> box:data,
        MaybeInt::Int -> box:tag
    ]
	box -> unbox -> :stop
}

// Unwraps the int, prints it and sends further.
def Unbox(data MaybeInt) (res int) {
    println fmt.Println
    panic runtime.Panic
    switch Switch<MaybeInt>
    ---
    :data -> [
        switch:data,
        MaybeInt::Int -> switch:case[0] -> println
    ]
    println -> :res
    [switch:else, println:err] -> panic
}
