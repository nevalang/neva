import {
  io
  image
}

component Main(start) (stop) {
  nodes {
    image.New
    image.Encode
    io.WriteAll
    Println
  }
  net {
    :start -> [
      ('minimal.png' -> writeAll:filename),
      (16 -> [new:width, new:height])
    ]
    new:img -> encode:img
    encode:data -> writeAll:data
    [encode:err, writeAll:err] -> println -> :stop
    writeAll:sig -> :stop
  }
}
